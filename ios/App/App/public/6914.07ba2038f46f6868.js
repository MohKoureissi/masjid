"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6914],{6914:(ke,M,g)=>{g.r(M),g.d(M,{LocalisationModule:()=>Ce});var v=g(9843),q=g(6814),H=g(95),E=g(1430),L=g(5861),o=g(8433);function m(c,e){return o.Util.extend(e,c.geocodingQueryParams)}function f(c,e){return o.Util.extend(e,c.reverseQueryParams)}let V=0;const Q=/[&<>"'`]/g,F=/[&<>"'`]/,X={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function Y(c){return X[c]}function R(c,e,r,t,n){const s="_l_geocoder_"+V++;e[n||"callback"]=s,window[s]=o.Util.bind(r,t);const i=document.createElement("script");i.type="text/javascript",i.src=c+T(e),i.id=s,document.getElementsByTagName("head")[0].appendChild(i)}function h(c,e,r){const t=new XMLHttpRequest;t.onreadystatechange=function(){if(4!==t.readyState)return;let n;if(200!==t.status&&304!==t.status)n="";else if("string"==typeof t.response)try{n=JSON.parse(t.response)}catch{n=t.response}else n=t.response;r(n)},t.open("GET",c+T(e),!0),t.responseType="json",t.setRequestHeader("Accept","application/json"),t.send(null)}function T(c,e,r){const t=[];for(const n in c){const s=encodeURIComponent(r?n.toUpperCase():n),i=c[n];if(Array.isArray(i))for(let l=0;l<i.length;l++)t.push(s+"="+encodeURIComponent(i[l]));else t.push(s+"="+encodeURIComponent(String(i)))}return(e&&-1!==e.indexOf("?")?"&":"?")+t.join("&")}class B{constructor(e){this.options={serviceUrl:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",apiKey:""},o.Util.setOptions(this,e)}geocode(e,r,t){const n=m(this.options,{token:this.options.apiKey,SingleLine:e,outFields:"Addr_Type",forStorage:!1,maxLocations:10,f:"json"});h(this.options.serviceUrl+"/findAddressCandidates",n,s=>{const i=[];if(s.candidates&&s.candidates.length)for(let l=0;l<=s.candidates.length-1;l++){const a=s.candidates[l],p=o.latLng(a.location.y,a.location.x),u=o.latLngBounds(o.latLng(a.extent.ymax,a.extent.xmax),o.latLng(a.extent.ymin,a.extent.xmin));i[l]={name:a.address,bbox:u,center:p}}r.call(t,i)})}suggest(e,r,t){return this.geocode(e,r,t)}reverse(e,r,t,n){const s=f(this.options,{location:e.lng+","+e.lat,distance:100,f:"json"});h(this.options.serviceUrl+"/reverseGeocode",s,i=>{const l=[];if(i&&!i.error){const a=o.latLng(i.location.y,i.location.x),p=o.latLngBounds(a,a);l.push({name:i.address.Match_addr,center:a,bbox:p})}t.call(n,l)})}}class D{constructor(e){this.options={serviceUrl:"https://dev.virtualearth.net/REST/v1/Locations"},o.Util.setOptions(this,e)}geocode(e,r,t){const n=m(this.options,{query:e,key:this.options.apiKey});R(this.options.apiKey,n,s=>{const i=[];if(s.resourceSets.length>0)for(let l=s.resourceSets[0].resources.length-1;l>=0;l--){const a=s.resourceSets[0].resources[l],p=a.bbox;i[l]={name:a.name,bbox:o.latLngBounds([p[0],p[1]],[p[2],p[3]]),center:o.latLng(a.point.coordinates)}}r.call(t,i)},this,"jsonp")}reverse(e,r,t,n){const s=f(this.options,{key:this.options.apiKey});R(this.options.serviceUrl+e.lat+","+e.lng,s,i=>{const l=[];for(let a=i.resourceSets[0].resources.length-1;a>=0;a--){const p=i.resourceSets[0].resources[a],u=p.bbox;l[a]={name:p.name,bbox:o.latLngBounds([u[0],u[1]],[u[2],u[3]]),center:o.latLng(p.point.coordinates)}}t.call(n,l)},this,"jsonp")}}class S{constructor(e){this.options={serviceUrl:"https://maps.googleapis.com/maps/api/geocode/json"},o.Util.setOptions(this,e)}geocode(e,r,t){const n=m(this.options,{key:this.options.apiKey,address:e});h(this.options.serviceUrl,n,s=>{const i=[];if(s.results&&s.results.length)for(let l=0;l<=s.results.length-1;l++){const a=s.results[l],p=o.latLng(a.geometry.location),u=o.latLngBounds(o.latLng(a.geometry.viewport.northeast),o.latLng(a.geometry.viewport.southwest));i[l]={name:a.formatted_address,bbox:u,center:p,properties:a.address_components}}r.call(t,i)})}reverse(e,r,t,n){const s=f(this.options,{key:this.options.apiKey,latlng:e.lat+","+e.lng});h(this.options.serviceUrl,s,i=>{const l=[];if(i.results&&i.results.length)for(let a=0;a<=i.results.length-1;a++){const p=i.results[a],u=o.latLng(p.geometry.location),b=o.latLngBounds(o.latLng(p.geometry.viewport.northeast),o.latLng(p.geometry.viewport.southwest));l[a]={name:p.formatted_address,bbox:b,center:u,properties:p.address_components}}t.call(n,l)})}}class N{constructor(e){if(this.options={serviceUrl:"https://geocoder.api.here.com/6.2/",app_id:"",app_code:"",apiKey:"",maxResults:5},o.Util.setOptions(this,e),e.apiKey)throw Error("apiKey is not supported, use app_id/app_code instead!")}geocode(e,r,t){const n=m(this.options,{searchtext:e,gen:9,app_id:this.options.app_id,app_code:this.options.app_code,jsonattributes:1,maxresults:this.options.maxResults});this.getJSON(this.options.serviceUrl+"geocode.json",n,r,t)}reverse(e,r,t,n){let s=e.lat+","+e.lng;this.options.reverseGeocodeProxRadius&&(s+=","+this.options.reverseGeocodeProxRadius);const i=f(this.options,{prox:s,mode:"retrieveAddresses",app_id:this.options.app_id,app_code:this.options.app_code,gen:9,jsonattributes:1,maxresults:this.options.maxResults});this.getJSON(this.options.serviceUrl+"reversegeocode.json",i,t,n)}getJSON(e,r,t,n){h(e,r,s=>{const i=[];if(s.response.view&&s.response.view.length)for(let l=0;l<=s.response.view[0].result.length-1;l++){const a=s.response.view[0].result[l].location,p=o.latLng(a.displayPosition.latitude,a.displayPosition.longitude),u=o.latLngBounds(o.latLng(a.mapView.topLeft.latitude,a.mapView.topLeft.longitude),o.latLng(a.mapView.bottomRight.latitude,a.mapView.bottomRight.longitude));i[l]={name:a.address.label,properties:a.address,bbox:u,center:p}}t.call(n,i)})}}class P{constructor(e){this.options={serviceUrl:"https://geocode.search.hereapi.com/v1",apiKey:"",app_id:"",app_code:"",maxResults:10},o.Util.setOptions(this,e)}geocode(e,r,t){const n=m(this.options,{q:e,apiKey:this.options.apiKey,limit:this.options.maxResults});if(!n.at&&!n.in)throw Error("at / in parameters not found. Please define coordinates (at=latitude,longitude) or other (in) in your geocodingQueryParams.");this.getJSON(this.options.serviceUrl+"/discover",n,r,t)}reverse(e,r,t,n){const s=f(this.options,{at:e.lat+","+e.lng,limit:this.options.reverseGeocodeProxRadius,apiKey:this.options.apiKey});this.getJSON(this.options.serviceUrl+"/revgeocode",s,t,n)}getJSON(e,r,t,n){h(e,r,s=>{const i=[];if(s.items&&s.items.length)for(let l=0;l<=s.items.length-1;l++){const a=s.items[l],p=o.latLng(a.position.lat,a.position.lng);let u;u=a.mapView?o.latLngBounds(o.latLng(a.mapView.south,a.mapView.west),o.latLng(a.mapView.north,a.mapView.east)):o.latLngBounds(o.latLng(a.position.lat,a.position.lng),o.latLng(a.position.lat,a.position.lng)),i[l]={name:a.address.label,properties:a.address,bbox:u,center:p}}t.call(n,i)})}}function O(c){let e;return(e=c.match(/^([NS])\s*(\d{1,3}(?:\.\d*)?)\W*([EW])\s*(\d{1,3}(?:\.\d*)?)$/))?o.latLng((/N/i.test(e[1])?1:-1)*+e[2],(/E/i.test(e[3])?1:-1)*+e[4]):(e=c.match(/^(\d{1,3}(?:\.\d*)?)\s*([NS])\W*(\d{1,3}(?:\.\d*)?)\s*([EW])$/))?o.latLng((/N/i.test(e[2])?1:-1)*+e[1],(/E/i.test(e[4])?1:-1)*+e[3]):(e=c.match(/^([NS])\s*(\d{1,3})\xb0?\s*(\d{1,3}(?:\.\d*)?)?['\u2032]?\W*([EW])\s*(\d{1,3})\xb0?\s*(\d{1,3}(?:\.\d*)?)?['\u2032]?$/))?o.latLng((/N/i.test(e[1])?1:-1)*(+e[2]+ +e[3]/60),(/E/i.test(e[4])?1:-1)*(+e[5]+ +e[6]/60)):(e=c.match(/^(\d{1,3})\xb0?\s*(\d{1,3}(?:\.\d*)?)?['\u2032]?\s*([NS])\W*(\d{1,3})\xb0?\s*(\d{1,3}(?:\.\d*)?)?['\u2032]?\s*([EW])$/))?o.latLng((/N/i.test(e[3])?1:-1)*(+e[1]+ +e[2]/60),(/E/i.test(e[6])?1:-1)*(+e[4]+ +e[5]/60)):(e=c.match(/^([NS])\s*(\d{1,3})\xb0?\s*(\d{1,2})['\u2032]?\s*(\d{1,3}(?:\.\d*)?)?["\u2033]?\W*([EW])\s*(\d{1,3})\xb0?\s*(\d{1,2})['\u2032]?\s*(\d{1,3}(?:\.\d*)?)?["\u2033]?$/))?o.latLng((/N/i.test(e[1])?1:-1)*(+e[2]+ +e[3]/60+ +e[4]/3600),(/E/i.test(e[5])?1:-1)*(+e[6]+ +e[7]/60+ +e[8]/3600)):(e=c.match(/^(\d{1,3})\xb0?\s*(\d{1,2})['\u2032]?\s*(\d{1,3}(?:\.\d*)?)?["\u2033]\s*([NS])\W*(\d{1,3})\xb0?\s*(\d{1,2})['\u2032]?\s*(\d{1,3}(?:\.\d*)?)?["\u2033]?\s*([EW])$/))?o.latLng((/N/i.test(e[4])?1:-1)*(+e[1]+ +e[2]/60+ +e[3]/3600),(/E/i.test(e[8])?1:-1)*(+e[5]+ +e[6]/60+ +e[7]/3600)):(e=c.match(/^\s*([+-]?\d+(?:\.\d*)?)\s*[\s,]\s*([+-]?\d+(?:\.\d*)?)\s*$/))?o.latLng(+e[1],+e[2]):void 0}class I{constructor(e){this.options={next:void 0,sizeInMeters:1e4},o.Util.setOptions(this,e)}geocode(e,r,t){const n=O(e);if(n){const s=[{name:e,center:n,bbox:n.toBounds(this.options.sizeInMeters)}];r.call(t,s)}else this.options.next&&this.options.next.geocode(e,r,t)}}class K{constructor(e){this.options={serviceUrl:"https://api.mapbox.com/geocoding/v5/mapbox.places/"},o.Util.setOptions(this,e)}_getProperties(e){const r={text:e.text,address:e.address};for(let t=0;t<(e.context||[]).length;t++)r[e.context[t].id.split(".")[0]]=e.context[t].text,e.context[t].short_code&&(r.countryShortCode=e.context[t].short_code);return r}geocode(e,r,t){const n=m(this.options,{access_token:this.options.apiKey});void 0!==n.proximity&&void 0!==n.proximity.lat&&void 0!==n.proximity.lng&&(n.proximity=n.proximity.lng+","+n.proximity.lat),h(this.options.serviceUrl+encodeURIComponent(e)+".json",n,s=>{const i=[];if(s.features&&s.features.length)for(let l=0;l<=s.features.length-1;l++){const a=s.features[l],p=o.latLng(a.center.reverse());let u;u=a.bbox?o.latLngBounds(o.latLng(a.bbox.slice(0,2).reverse()),o.latLng(a.bbox.slice(2,4).reverse())):o.latLngBounds(p,p),i[l]={name:a.place_name,bbox:u,center:p,properties:this._getProperties(a)}}r.call(t,i)})}suggest(e,r,t){return this.geocode(e,r,t)}reverse(e,r,t,n){h(this.options.serviceUrl+e.lng+","+e.lat+".json",f(this.options,{access_token:this.options.apiKey}),l=>{const a=[];if(l.features&&l.features.length)for(let p=0;p<=l.features.length-1;p++){const u=l.features[p],b=o.latLng(u.center.reverse());let k;k=u.bbox?o.latLngBounds(o.latLng(u.bbox.slice(0,2).reverse()),o.latLng(u.bbox.slice(2,4).reverse())):o.latLngBounds(b,b),a[p]={name:u.place_name,bbox:k,center:b,properties:this._getProperties(u)}}t.call(n,a)})}}class j{constructor(e){this.options={serviceUrl:"https://www.mapquestapi.com/geocoding/v1"},o.Util.setOptions(this,e),this.options.apiKey=decodeURIComponent(this.options.apiKey)}_formatName(...e){return e.filter(r=>!!r).join(", ")}geocode(e,r,t){const n=m(this.options,{key:this.options.apiKey,location:e,limit:5,outFormat:"json"});h(this.options.serviceUrl+"/address",n,o.Util.bind(function(s){const i=[];if(s.results&&s.results[0].locations)for(let l=s.results[0].locations.length-1;l>=0;l--){const a=s.results[0].locations[l],p=o.latLng(a.latLng);i[l]={name:this._formatName(a.street,a.adminArea4,a.adminArea3,a.adminArea1),bbox:o.latLngBounds(p,p),center:p}}r.call(t,i)},this))}reverse(e,r,t,n){const s=f(this.options,{key:this.options.apiKey,location:e.lat+","+e.lng,outputFormat:"json"});h(this.options.serviceUrl+"/reverse",s,o.Util.bind(function(i){const l=[];if(i.results&&i.results[0].locations)for(let a=i.results[0].locations.length-1;a>=0;a--){const p=i.results[0].locations[a],u=o.latLng(p.latLng);l[a]={name:this._formatName(p.street,p.adminArea4,p.adminArea3,p.adminArea1),bbox:o.latLngBounds(u,u),center:u}}t.call(n,l)},this))}}class A{constructor(e){this.options={userId:void 0,apiKey:void 0,serviceUrl:"https://neutrinoapi.com/"},o.Util.setOptions(this,e)}geocode(e,r,t){const n=m(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,address:e.split(/\s+/).join(".")});h(this.options.serviceUrl+"geocode-address",n,s=>{const i=[];if(s.locations){s.geometry=s.locations[0];const l=o.latLng(s.geometry.latitude,s.geometry.longitude),a=o.latLngBounds(l,l);i[0]={name:s.geometry.address,bbox:a,center:l}}r.call(t,i)})}suggest(e,r,t){return this.geocode(e,r,t)}reverse(e,r,t,n){const s=f(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,latitude:e.lat,longitude:e.lng});h(this.options.serviceUrl+"geocode-reverse",s,i=>{const l=[];if(200==i.status.status&&i.found){const a=o.latLng(e.lat,e.lng),p=o.latLngBounds(a,a);l[0]={name:i.address,bbox:p,center:a}}t.call(n,l)})}}class _{constructor(e){this.options={serviceUrl:"https://nominatim.openstreetmap.org/",htmlTemplate:function(r){const t=r.address;let n;const s=[];return(t.road||t.building)&&s.push("{building} {road} {house_number}"),(t.city||t.town||t.village||t.hamlet)&&(n=s.length>0?"leaflet-control-geocoder-address-detail":"",s.push('<span class="'+n+'">{postcode} {city} {town} {village} {hamlet}</span>')),(t.state||t.country)&&(n=s.length>0?"leaflet-control-geocoder-address-context":"",s.push('<span class="'+n+'">{state} {country}</span>')),function te(c,e){return c.replace(/\{ *([\w_]+) *\}/g,(r,t)=>{let n=e[t];return void 0===n?n="":"function"==typeof n&&(n=n(e)),function ee(c){return null==c?"":c?F.test(c=""+c)?c.replace(Q,Y):c:c+""}(n)})}(s.join("<br/>"),t)}},o.Util.setOptions(this,e||{})}geocode(e,r,t){const n=m(this.options,{q:e,limit:5,format:"json",addressdetails:1});h(this.options.serviceUrl+"search",n,s=>{const i=[];for(let l=s.length-1;l>=0;l--){const a=s[l].boundingbox;for(let p=0;p<4;p++)a[p]=+a[p];i[l]={icon:s[l].icon,name:s[l].display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(s[l]):void 0,bbox:o.latLngBounds([a[0],a[2]],[a[1],a[3]]),center:o.latLng(s[l].lat,s[l].lon),properties:s[l]}}r.call(t,i)})}reverse(e,r,t,n){const s=f(this.options,{lat:e.lat,lon:e.lng,zoom:Math.round(Math.log(r/256)/Math.log(2)),addressdetails:1,format:"json"});h(this.options.serviceUrl+"reverse",s,i=>{const l=[];if(i&&i.lat&&i.lon){const a=o.latLng(i.lat,i.lon),p=o.latLngBounds(a,a);l.push({name:i.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(i):void 0,center:a,bbox:p,properties:i})}t.call(n,l)})}}class G{constructor(e){o.Util.setOptions(this,e)}geocode(e,r,t){try{const n=this.options.OpenLocationCode.decode(e),s={name:e,center:o.latLng(n.latitudeCenter,n.longitudeCenter),bbox:o.latLngBounds(o.latLng(n.latitudeLo,n.longitudeLo),o.latLng(n.latitudeHi,n.longitudeHi))};r.call(t,[s])}catch(n){console.warn(n),r.call(t,[])}}reverse(e,r,t,n){try{const i={name:this.options.OpenLocationCode.encode(e.lat,e.lng,this.options.codeLength),center:o.latLng(e.lat,e.lng),bbox:o.latLngBounds(o.latLng(e.lat,e.lng),o.latLng(e.lat,e.lng))};t.call(n,[i])}catch(s){console.warn(s),t.call(n,[])}}}class W{constructor(e){this.options={serviceUrl:"https://api.opencagedata.com/geocode/v1/json"},o.Util.setOptions(this,e)}geocode(e,r,t){const n=m(this.options,{key:this.options.apiKey,q:e});h(this.options.serviceUrl,n,s=>{const i=[];if(s.results&&s.results.length)for(let l=0;l<s.results.length;l++){const a=s.results[l],p=o.latLng(a.geometry);let u;u=a.annotations&&a.annotations.bounds?o.latLngBounds(o.latLng(a.annotations.bounds.northeast),o.latLng(a.annotations.bounds.southwest)):o.latLngBounds(p,p),i.push({name:a.formatted,bbox:u,center:p})}r.call(t,i)})}suggest(e,r,t){return this.geocode(e,r,t)}reverse(e,r,t,n){const s=f(this.options,{key:this.options.apiKey,q:[e.lat,e.lng].join(",")});h(this.options.serviceUrl,s,i=>{const l=[];if(i.results&&i.results.length)for(let a=0;a<i.results.length;a++){const p=i.results[a],u=o.latLng(p.geometry);let b;b=p.annotations&&p.annotations.bounds?o.latLngBounds(o.latLng(p.annotations.bounds.northeast),o.latLng(p.annotations.bounds.southwest)):o.latLngBounds(u,u),l.push({name:p.formatted,bbox:b,center:u})}t.call(n,l)})}}class x{constructor(e){this.options={serviceUrl:"https://api.geocode.earth/v1"},this._lastSuggest=0,o.Util.setOptions(this,e)}geocode(e,r,t){const n=m(this.options,{api_key:this.options.apiKey,text:e});h(this.options.serviceUrl+"/search",n,s=>{r.call(t,this._parseResults(s,"bbox"))})}suggest(e,r,t){const n=m(this.options,{api_key:this.options.apiKey,text:e});h(this.options.serviceUrl+"/autocomplete",n,s=>{s.geocoding.timestamp>this._lastSuggest&&(this._lastSuggest=s.geocoding.timestamp,r.call(t,this._parseResults(s,"bbox")))})}reverse(e,r,t,n){const s=f(this.options,{api_key:this.options.apiKey,"point.lat":e.lat,"point.lon":e.lng});h(this.options.serviceUrl+"/reverse",s,i=>{t.call(n,this._parseResults(i,"bounds"))})}_parseResults(e,r){const t=[];return o.geoJSON(e,{pointToLayer:function(n,s){return o.circleMarker(s)},onEachFeature:function(n,s){const i={};let l,a;s.getBounds?(l=s.getBounds(),a=l.getCenter()):s.feature.bbox?(a=s.getLatLng(),l=o.latLngBounds(o.GeoJSON.coordsToLatLng(s.feature.bbox.slice(0,2)),o.GeoJSON.coordsToLatLng(s.feature.bbox.slice(2,4)))):(a=s.getLatLng(),l=o.latLngBounds(a,a)),i.name=s.feature.properties.label,i.center=a,i[r]=l,i.properties=s.feature.properties,t.push(i)}}),t}}function U(c){return new x(c)}const he=x,ge=U,me=x,fe=U;class J extends x{constructor(e){super(o.Util.extend({serviceUrl:"https://api.openrouteservice.org/geocode"},e))}}class Z{constructor(e){this.options={serviceUrl:"https://photon.komoot.io/api/",reverseUrl:"https://photon.komoot.io/reverse/",nameProperties:["name","street","suburb","hamlet","town","city","state","country"]},o.Util.setOptions(this,e)}geocode(e,r,t){const n=m(this.options,{q:e});h(this.options.serviceUrl,n,o.Util.bind(function(s){r.call(t,this._decodeFeatures(s))},this))}suggest(e,r,t){return this.geocode(e,r,t)}reverse(e,r,t,n){const s=f(this.options,{lat:e.lat,lon:e.lng});h(this.options.reverseUrl,s,o.Util.bind(function(i){t.call(n,this._decodeFeatures(i))},this))}_decodeFeatures(e){const r=[];if(e&&e.features)for(let t=0;t<e.features.length;t++){const n=e.features[t],s=n.geometry.coordinates,i=o.latLng(s[1],s[0]),l=n.properties.extent,a=l?o.latLngBounds([l[1],l[0]],[l[3],l[2]]):o.latLngBounds(i,i);r.push({name:this._decodeFeatureName(n),html:this.options.htmlTemplate?this.options.htmlTemplate(n):void 0,center:i,bbox:a,properties:n.properties})}return r}_decodeFeatureName(e){return(this.options.nameProperties||[]).map(r=>e.properties[r]).filter(r=>!!r).join(", ")}}class ${constructor(e){this.options={serviceUrl:"https://api.what3words.com/v2/"},o.Util.setOptions(this,e)}geocode(e,r,t){h(this.options.serviceUrl+"forward",m(this.options,{key:this.options.apiKey,addr:e.split(/\s+/).join(".")}),n=>{const s=[];if(n.geometry){const i=o.latLng(n.geometry.lat,n.geometry.lng),l=o.latLngBounds(i,i);s[0]={name:n.words,bbox:l,center:i}}r.call(t,s)})}suggest(e,r,t){return this.geocode(e,r,t)}reverse(e,r,t,n){h(this.options.serviceUrl+"reverse",f(this.options,{key:this.options.apiKey,coords:[e.lat,e.lng].join(",")}),s=>{const i=[];if(200==s.status.status){const l=o.latLng(s.geometry.lat,s.geometry.lng),a=o.latLngBounds(l,l);i[0]={name:s.words,bbox:a,center:l}}t.call(n,i)})}}var z={__proto__:null,geocodingParams:m,reverseParams:f,ArcGis:B,arcgis:function oe(c){return new B(c)},Bing:D,bing:function se(c){return new D(c)},Google:S,google:function ne(c){return new S(c)},HERE:N,HEREv2:P,here:function ie(c){return c.apiKey?new P(c):new N(c)},parseLatLng:O,LatLng:I,latLng:function re(c){return new I(c)},Mapbox:K,mapbox:function le(c){return new K(c)},MapQuest:j,mapQuest:function ae(c){return new j(c)},Neutrino:A,neutrino:function ce(c){return new A(c)},Nominatim:_,nominatim:function pe(c){return new _(c)},OpenLocationCode:G,openLocationCode:function ue(c){return new G(c)},OpenCage:W,opencage:function de(c){return new W(c)},Pelias:x,pelias:U,GeocodeEarth:he,geocodeEarth:ge,Mapzen:me,mapzen:fe,Openrouteservice:J,openrouteservice:function ve(c){return new J(c)},Photon:Z,photon:function be(c){return new Z(c)},What3Words:$,what3words:function Le(c){return new $(c)}};class w{constructor(...e){}}o.Util.extend(w.prototype,o.Control.prototype),o.Util.extend(w.prototype,o.Evented.prototype);class y extends w{constructor(e){super(e),this.options={showUniqueResult:!0,showResultIcons:!1,collapsed:!0,expand:"touch",position:"topright",placeholder:"Search...",errorMessage:"Nothing found.",iconLabel:"Initiate a new search",query:"",queryMinLength:1,suggestMinLength:3,suggestTimeout:250,defaultMarkGeocode:!0},this._requestCount=0,o.Util.setOptions(this,e),this.options.geocoder||(this.options.geocoder=new _)}addThrobberClass(){o.DomUtil.addClass(this._container,"leaflet-control-geocoder-throbber")}removeThrobberClass(){o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-throbber")}onAdd(e){const r="leaflet-control-geocoder",t=o.DomUtil.create("div",r+" leaflet-bar"),n=o.DomUtil.create("button",r+"-icon",t),s=this._form=o.DomUtil.create("div",r+"-form",t);this._map=e,this._container=t,n.innerHTML="&nbsp;",n.type="button",n.setAttribute("aria-label",this.options.iconLabel);const i=this._input=o.DomUtil.create("input","",s);return i.type="text",i.value=this.options.query,i.placeholder=this.options.placeholder,o.DomEvent.disableClickPropagation(i),this._errorElement=o.DomUtil.create("div",r+"-form-no-error",t),this._errorElement.innerHTML=this.options.errorMessage,this._alts=o.DomUtil.create("ul",r+"-alternatives leaflet-control-geocoder-alternatives-minimized",t),o.DomEvent.disableClickPropagation(this._alts),o.DomEvent.addListener(i,"keydown",this._keydown,this),this.options.geocoder.suggest&&o.DomEvent.addListener(i,"input",this._change,this),o.DomEvent.addListener(i,"blur",()=>{this.options.collapsed&&!this._preventBlurCollapse&&this._collapse(),this._preventBlurCollapse=!1}),this.options.collapsed?"click"===this.options.expand?o.DomEvent.addListener(t,"click",l=>{0===l.button&&2!==l.detail&&this._toggle()}):"touch"===this.options.expand?o.DomEvent.addListener(t,o.Browser.touch?"touchstart mousedown":"mousedown",l=>{this._toggle(),l.preventDefault(),l.stopPropagation()},this):(o.DomEvent.addListener(t,"mouseover",this._expand,this),o.DomEvent.addListener(t,"mouseout",this._collapse,this),this._map.on("movestart",this._collapse,this)):(this._expand(),o.DomEvent.addListener(t,o.Browser.touch?"touchstart":"click",()=>this._geocode())),this.options.defaultMarkGeocode&&this.on("markgeocode",this.markGeocode,this),this.on("startgeocode",this.addThrobberClass,this),this.on("finishgeocode",this.removeThrobberClass,this),this.on("startsuggest",this.addThrobberClass,this),this.on("finishsuggest",this.removeThrobberClass,this),o.DomEvent.disableClickPropagation(t),t}setQuery(e){return this._input.value=e,this}_geocodeResult(e,r){if(!r&&this.options.showUniqueResult&&1===e.length)this._geocodeResultSelected(e[0]);else if(e.length>0){this._alts.innerHTML="",this._results=e,o.DomUtil.removeClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),o.DomUtil.addClass(this._container,"leaflet-control-geocoder-options-open");for(let t=0;t<e.length;t++)this._alts.appendChild(this._createAlt(e[t],t))}else o.DomUtil.addClass(this._container,"leaflet-control-geocoder-options-error"),o.DomUtil.addClass(this._errorElement,"leaflet-control-geocoder-error")}markGeocode(e){const r=e.geocode;return this._map.fitBounds(r.bbox),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new o.Marker(r.center).bindPopup(r.html||r.name).addTo(this._map).openPopup(),this}_geocode(e){const r=this._input.value;if(!e&&r.length<this.options.queryMinLength)return;const t=++this._requestCount,n=i=>{t===this._requestCount&&(this.fire(e?"finishsuggest":"finishgeocode",{input:r,results:i}),this._geocodeResult(i,e))};this._lastGeocode=r,e||this._clearResults(),this.fire(e?"startsuggest":"startgeocode",{input:r}),e?this.options.geocoder.suggest(r,n):this.options.geocoder.geocode(r,n)}_geocodeResultSelected(e){this.fire("markgeocode",{geocode:e})}_toggle(){o.DomUtil.hasClass(this._container,"leaflet-control-geocoder-expanded")?this._collapse():this._expand()}_expand(){o.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded"),this._input.select(),this.fire("expand")}_collapse(){o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-expanded"),o.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),o.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error"),o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-open"),o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-error"),this._input.blur(),this.fire("collapse")}_clearResults(){o.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),this._selection=null,o.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error"),o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-open"),o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-error")}_createAlt(e,r){const t=o.DomUtil.create("li",""),n=o.DomUtil.create("a","",t),s=this.options.showResultIcons&&e.icon?o.DomUtil.create("img","",n):null,i=e.html?void 0:document.createTextNode(e.name);return s&&(s.src=e.icon),t.setAttribute("data-result-index",String(r)),e.html?n.innerHTML=n.innerHTML+e.html:i&&n.appendChild(i),o.DomEvent.addListener(t,"mousedown touchstart",a=>{this._preventBlurCollapse=!0,o.DomEvent.stop(a),this._geocodeResultSelected(e),o.DomEvent.on(t,"click touchend",()=>{this.options.collapsed?this._collapse():this._clearResults()})},this),t}_keydown(e){const r=t=>{this._selection&&(o.DomUtil.removeClass(this._selection,"leaflet-control-geocoder-selected"),this._selection=this._selection[t>0?"nextSibling":"previousSibling"]),this._selection||(this._selection=this._alts[t>0?"firstChild":"lastChild"]),this._selection&&o.DomUtil.addClass(this._selection,"leaflet-control-geocoder-selected")};switch(e.keyCode){case 27:this.options.collapsed?this._collapse():this._clearResults();break;case 38:r(-1);break;case 40:r(1);break;case 13:if(this._selection){const t=parseInt(this._selection.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[t]),this._clearResults()}else this._geocode();break;default:return}o.DomEvent.preventDefault(e)}_change(){const e=this._input.value;e!==this._lastGeocode&&(clearTimeout(this._suggestTimeout),e.length>=this.options.suggestMinLength?this._suggestTimeout=setTimeout(()=>this._geocode(!0),this.options.suggestTimeout):this._clearResults())}}o.Util.extend(y,z),o.Util.extend(o.Control,{Geocoder:y,geocoder:function xe(c){return new y(c)}});const C=(0,g(2726).fo)("Geolocation",{web:()=>g.e(579).then(g.bind(g,579)).then(c=>new c.GeolocationWeb)});g(7119);var d=g(9468),_e=g(8007);const Ue=[{path:"",component:(()=>{var c;class e{constructor(t){this.mosqueService=t,this.userMarker=null,this.watchId=null,this.mosquee=[],this.filteredMosques=[],this.searchQuery="",this.markersLayer=o.layerGroup()}ngOnInit(){var t=this;return(0,L.Z)(function*(){yield t.initMap();const n=yield t.mosqueService.filter();yield t.afficherMosques(n),o.layerGroup().addTo(t.map)})()}initMap(){var t=this;return(0,L.Z)(function*(){const{coords:n}=yield C.getCurrentPosition(),s=n.latitude,i=n.longitude;t.map=o.map("map").setView([s,i],15),o.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(t.map),new y({geocoder:new z.Nominatim,position:"topright"}).addTo(t.map),o.marker([s,i]).addTo(t.map).bindPopup("Vous \xeates ici !").openPopup()})()}afficherMosques(t){var n=this;return(0,L.Z)(function*(){const s=o.icon({iconUrl:"/assets/logo.png",iconSize:[32,32],iconAnchor:[16,32]});t.forEach(i=>{const l=o.latLng(i.lat,i.lng);o.marker(l,{icon:s}).addTo(n.map).bindPopup(`\n             Nom : ${i.name}<br>Quartier : ${i.quartier} <br>Quartier : ${i.imanName}\n        `).on("click",()=>{n.lancerItineraireVersMosquee(i)})})})()}createRoute(t,n){var s=this;return(0,L.Z)(function*(){s.currentRoute&&s.map.removeControl(s.currentRoute),s.currentRoute=o.Routing.control({waypoints:[o.latLng(t.lat,t.lng),o.latLng(n.lat,n.lng)],routeWhileDragging:!0}).addTo(s.map)})()}lancerItineraireVersMosquee(t){var n=this;return(0,L.Z)(function*(){const s=o.latLng(t.lat,t.lng),{coords:i}=yield C.getCurrentPosition(),l=o.latLng(i.latitude,i.longitude);n.userMarker||(n.userMarker=o.marker(l).addTo(n.map)),n.watchId=navigator.geolocation.watchPosition(p=>{const u=o.latLng(p.coords.latitude,p.coords.longitude);n.userMarker&&n.userMarker.setLatLng(u)},p=>{console.error("Erreur de g\xe9olocalisation :",p)},{enableHighAccuracy:!0}),n.createRoute(l,s)})()}quitterItineraire(){var t=this;return(0,L.Z)(function*(){t.currentRoute?(t.userMarker&&(t.map.removeLayer(t.userMarker),t.userMarker=null),t.watchId&&navigator.geolocation.clearWatch(t.watchId),t.map.removeControl(t.currentRoute),t.currentRoute=null,alert("Itin\xe9raire quitt\xe9"),console.log("Itin\xe9raire quitt\xe9.")):(alert("Aucun itin\xe9raire actuellement trac\xe9"),console.error("Aucun itin\xe9raire actuellement trac\xe9."))})()}onSearchInput(t){const n=t.target.value.toLowerCase();this.filteredMosques=this.mosquee.filter(s=>s.name.toLowerCase().includes(n)||s.imamName.toLowerCase().includes(n)),this.markersLayer.clearLayers(),this.filteredMosques.forEach(s=>{const i=o.latLng(s.lat,s.lng);o.marker(i).addTo(this.markersLayer).bindPopup(`\n        Nom : ${s.name}<br>Imam : ${s.imamName}<br>\n        Quartier : ${s.quartier}\n      `)}),this.markersLayer.addTo(this.map)}partagerItineraire(){var t=this;return(0,L.Z)(function*(){if(t.currentRoute){const s=t.currentRoute.getPlan().getWaypoints();if(s.length>=2){const i=s[0].latLng,l=s[s.length-1].latLng,p=`https://api.whatsapp.com/send?text=${encodeURIComponent(`Check out this route: https://www.google.com/maps/dir/${i.lat},${i.lng}/${l.lat},${l.lng}/`)}`;window.open(p)}else alert("L'itin\xe9raire non chosi"),console.error("L'itin\xe9raire ne contient pas suffisamment de waypoints pour le partager.")}else alert("L'itin\xe9raire non chosi"),console.error("Aucun itin\xe9raire actuellement trac\xe9.")})()}afficherPositionUser(){var t=this;return(0,L.Z)(function*(){try{const n=yield C.getCurrentPosition();t.map.setView([n.coords.latitude,n.coords.longitude],20)}catch(n){console.error("Erreur de g\xe9olocalisation :",n)}})()}}return(c=e).\u0275fac=function(t){return new(t||c)(d.Y36(_e.U))},c.\u0275cmp=d.Xpm({type:c,selectors:[["app-localisation"]],decls:21,vars:2,consts:[["id","map",2,"width","100%","height","100%",3,"translucent"],["bottom","","id","menuButtons",2,"display","flex","justify-content","space-around","margin-left","15%"],["text-center",""],["name","stop",3,"click"],["name","share-social-outline",3,"click"],["name","locate",3,"click"],[3,"fullscreen"],["collapse","condense"],["size","large"]],template:function(t,n){1&t&&(d.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),d._uU(3," Tab 1 "),d.qZA()()(),d.TgZ(4,"ion-fab",1)(5,"ion-row",2)(6,"ion-col")(7,"ion-fab-button")(8,"ion-icon",3),d.NdJ("click",function(){return n.quitterItineraire()}),d._uU(9,"Stop"),d.qZA()()(),d.TgZ(10,"ion-col")(11,"ion-fab-button")(12,"ion-icon",4),d.NdJ("click",function(){return n.partagerItineraire()}),d.qZA()()(),d.TgZ(13,"ion-col")(14,"ion-fab-button")(15,"ion-icon",5),d.NdJ("click",function(){return n.afficherPositionUser()}),d.qZA()()()()(),d.TgZ(16,"ion-content",6)(17,"ion-header",7)(18,"ion-toolbar")(19,"ion-title",8),d._uU(20,"MAp"),d.qZA()()()()),2&t&&(d.Q6J("translucent",!0),d.xp6(16),d.Q6J("fullscreen",!0))},dependencies:[v.wI,v.W2,v.IJ,v.W4,v.Gu,v.gu,v.Nd,v.wd,v.sr]}),e})()}];let we=(()=>{var c;class e{}return(c=e).\u0275fac=function(t){return new(t||c)},c.\u0275mod=d.oAB({type:c}),c.\u0275inj=d.cJS({imports:[E.Bz.forChild(Ue),E.Bz]}),e})(),Ce=(()=>{var c;class e{}return(c=e).\u0275fac=function(t){return new(t||c)},c.\u0275mod=d.oAB({type:c}),c.\u0275inj=d.cJS({imports:[v.Pc,q.ez,H.u5,we]}),e})()}}]);